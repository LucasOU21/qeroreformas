---
import { Image } from "astro:assets";
import { formatDate } from "@utils/utils";
import klingerImage from "@images/blog/Klinger.jpg";

// Blog post images
import post1Image from "@images/blog/post-1.jpg";
import post2Image from "@images/blog/post-2.jpg";
import post3Image from "@images/blog/post-3.jpg";

// Choose image based on blog ID
function getBlogImage(blogId) {
  const id = blogId.split('/')[1];
  switch (id) {
    case "encimera-en-los-disenos-de-cocina":
      return post1Image;
    case "estilos-de-cocina-disenos-que-inspiran":
      return post2Image;
    case "tendencias-en-suelos-laminados-y-tarimas-flotantes":
      return post3Image;
    default:
      return post1Image; // default image
  }
}

// Component props
interface Props {
  blogEntry: any;
  blogLocale?: string;
}

// Get props
const { blogEntry, blogLocale }: Props = Astro.props;

// Build blog URL
const blogID = blogLocale
  ? `/${blogLocale}/blog/${blogEntry.id.split("/")[1]}`
  : `/blog/${blogEntry.id.split("/")[1]}`;

// Select image
const blogImage = getBlogImage(blogEntry.id);

// Author
const author = "Klinger Mallqui";
---

<div class="group flex flex-col h-full rounded-xl hover:shadow-xl transition-all duration-300">
  
  <!-- Image wrapper -->
  <div class="aspect-w-16 aspect-h-10 relative rounded-t-xl group">
    <a class="absolute inset-0 z-10" href={blogID}>
      <Image
        src={blogImage}
        alt={blogEntry.data.cardImageAlt}
        class="h-full w-full rounded-t-xl object-cover"
        draggable={"false"}
        format={"jpg"}
      />
    </a>
    
    <!-- Category badge -->
    <span
      class="absolute start-0 top-0 rounded-se-xl rounded-ts-xl bg-neutral-100/80 px-3 py-1.5 text-xs font-medium text-neutral-800 backdrop-blur-sm dark:bg-neutral-800/80 dark:text-neutral-200"
    >
      {blogEntry.data.category}
    </span>
    
    <!-- Text overlay for encimera post -->
    {blogEntry.id.includes("encimera-en-los-disenos-de-cocina") && (
      <div
        class="absolute inset-0 flex flex-col justify-end p-4 bg-black/40 rounded-t-xl"
      >
        <h3 class="text-white text-xl font-bold mb-2">
          Funcionalidad y Estilo: El Uso de Encimeras en los Diseños de Cocina
        </h3>
        <p class="text-white text-sm mb-3">
          Las encimeras son uno de los elementos más importantes en cualquier diseño de cocina.
        </p>
        <div class="flex items-center gap-x-2">
          <Image
            class="h-8 w-8 rounded-full"
            src={klingerImage}
            alt="Avatar"
            width={32}
            height={32}
          />
          <span class="text-white text-sm font-semibold">{author}</span>
        </div>
      </div>
    )}

    <!-- Text overlay for estilos de cocina post -->
    {blogEntry.id.includes("estilos-de-cocina-disenos-que-inspiran") && (
      <div
        class="absolute inset-0 flex flex-col justify-end p-4 bg-black/40 rounded-t-xl"
      >
        <h3 class="text-white text-xl font-bold mb-2">
          Principales Estilos de Cocina: Diseños que Inspiran
        </h3>
        <p class="text-white text-sm mb-3">
          El diseño de las cocinas ha evolucionado a lo largo de los años para adaptarse a los gustos y necesidades de cada persona.
        </p>
        <div class="flex items-center gap-x-2">
          <Image
            class="h-8 w-8 rounded-full"
            src={klingerImage}
            alt="Avatar"
            width={32}
            height={32}
          />
          <span class="text-white text-sm font-semibold">{author}</span>
        </div>
      </div>
    )}

    <!-- Text overlay for suelos laminados post -->
    {blogEntry.id.includes("tendencias-en-suelos-laminados-y-tarimas-flotantes") && (
      <div
        class="absolute inset-0 flex flex-col justify-end p-4 bg-black/40 rounded-t-xl"
      >
        <h3 class="text-white text-xl font-bold mb-2">
          Tendencias en Suelos Laminados y Tarimas Flotantes: Elegancia y Funcionalidad para Tu Hogar
        </h3>
        <p class="text-white text-sm mb-3">
          Los suelos laminados y las tarimas flotantes se han convertido en una de las opciones más populares en los proyectos de reformas y decoración.
        </p>
        <div class="flex items-center gap-x-2">
          <Image
            class="h-8 w-8 rounded-full"
            src={klingerImage}
            alt="Avatar"
            width={32}
            height={32}
          />
          <span class="text-white text-sm font-semibold">{author}</span>
        </div>
      </div>
    )}
  </div>
  
  <!-- Blog content below -->
  <div class="flex h-full flex-col rounded-b-xl border border-neutral-200 p-4 dark:border-neutral-700 md:p-5">
    <div class="my-3">
      <a
        href={blogID}
        class="text-xl font-bold text-neutral-800 decoration-2 hover:underline dark:text-neutral-200"
      >
        {blogEntry.data.title}
      </a>
      <p class="mt-3 text-neutral-600 dark:text-neutral-400">
        {blogEntry.data.description}
      </p>
    </div>
    <div class="mt-auto flex items-center gap-x-3">
      <Image
        class="h-8 w-8 rounded-full"
        src={klingerImage}
        alt="Avatar"
        width={32}
        height={32}
      />
      <div>
        <h5 class="text-sm font-semibold text-neutral-800 dark:text-neutral-200">
          {author}
        </h5>
        <span class="block text-xs text-neutral-500">
          {formatDate(blogEntry.data.pubDate)}
        </span>
      </div>
    </div>
  </div>
</div>