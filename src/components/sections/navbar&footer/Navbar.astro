---
// src/components/Navbar.astro
import ThemeIcon from "@components/ThemeIcon.astro";
---

<header id="navbar" class="absolute top-2 left-0 right-0 z-50">
  <div class="navbar-container mx-auto px-4 sm:px-6 lg:px-8">
  <div class="flex items-center justify-between bg-black/25 backdrop-blur-sm rounded-xl px-6 py-4">
      <!-- Logo - increased size but constrained with overflow hidden -->
      <div class="flex-shrink-0 h-10 flex items-center overflow-hidden">
        <a href="/" class="flex items-center" aria-label="Kalia Reformas y Decoración">
          <div class="flex-shrink-0 py-6">
            <img 
              src="src/images/logos/KaliaLogo-300x300.png" 
              alt="Kalia Logo" 
              class="w-auto h-60 -mt-4"
            />
          </div>
        </a>
      </div>

      <!-- Right side with nav links and theme toggle -->
      <div class="flex items-center space-x-8">
        <!-- Desktop Navigation Links -->
        <nav class="hidden md:flex items-center space-x-8">
          <a href="/" class="nav-link">Inicio</a>
          <a href="/services" class="nav-link">Servicios</a>
          <a href="/nosotros" class="nav-link">Nosotros</a>
          <a href="/equipo" class="nav-link">Equipo</a>
          <a href="/blog" class="nav-link">Blog</a>
        </nav>

        <!-- Theme Toggle -->
        <div class="hidden md:block">
          <ThemeIcon />
        </div>

        <!-- Mobile menu button -->
        <button 
          id="mobile-menu-button" 
          type="button" 
          class="md:hidden inline-flex items-center justify-center p-2 rounded-md text-white hover:text-gold-accent" 
          aria-controls="mobile-menu" 
          aria-expanded="false"
        >
          <span class="sr-only">Abrir menú principal</span>
          <!-- Hamburger icon -->
          <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <!-- X icon -->
          <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile menu -->
  <div id="mobile-menu" class="md:hidden hidden mx-4 mt-2">
    <div class="px-4 pt-2 pb-6 space-y-2 bg-black/80 backdrop-blur-md rounded-xl">
      <a href="/" class="mobile-nav-link">Inicio</a>
      <a href="/servicios" class="mobile-nav-link">Servicios</a>
      <a href="/nosotros" class="mobile-nav-link">Nosotros</a>
      <a href="/blog" class="mobile-nav-link">Blog</a>
      <a href="/contacto" class="mobile-nav-link">Contacto</a>
      
      <!-- Mobile Theme Toggle -->
      <div class="py-2 flex justify-center">
        <ThemeIcon />
      </div>
    </div>
  </div>
</header>

<style>
  /* Gold accent color */
  :root {
    --gold-accent: #daa520;
  }

  /* Navigation styles */
  .nav-link {
    color: white;
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    font-size: 0.95rem;
    letter-spacing: 0.3px;
    transition: all 0.3s ease;
    position: relative;
  }

  .nav-link:after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background-color: var(--gold-accent);
    transition: width 0.3s ease;
  }

  .nav-link:hover {
    color: var(--gold-accent);
  }

  .nav-link:hover:after {
    width: 100%;
  }

  /* Mobile navigation styles */
  .mobile-nav-link {
    display: block;
    padding: 0.75rem 0;
    color: white;
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    font-size: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    transition: color 0.3s ease;
  }

  .mobile-nav-link:hover {
    color: var(--gold-accent);
  }

  /* Navbar container */
  .navbar-container {
    max-width: 1400px;
  }
</style>

<script>
  // DOM elements
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const hamburgerIcon = mobileMenuButton?.querySelector('svg:nth-child(1)');
  const closeIcon = mobileMenuButton?.querySelector('svg:nth-child(2)');

  // Toggle mobile menu
  function toggleMobileMenu() {
    const expanded = mobileMenuButton?.getAttribute('aria-expanded') === 'true';
    
    mobileMenuButton?.setAttribute('aria-expanded', (!expanded).toString());
    mobileMenu?.classList.toggle('hidden', expanded);
    
    if (hamburgerIcon && closeIcon) {
      hamburgerIcon.classList.toggle('hidden', !expanded);
      closeIcon.classList.toggle('hidden', expanded);
    }
  }

  // Event listeners
  mobileMenuButton?.addEventListener('click', toggleMobileMenu);
</script>